{%- assign button_text = block.settings.button_text | default: 'Button' -%}
{%- assign text_color = block.settings.button_color | default: '#0c2340' -%}

<button
  class='gdr-modal__button gdr-modal__button--dismiss {{ block.settings.font_style }}'
  type='button'
  data-modal-close
  data-modal-button='dismiss'
  data-button-text='{{ button_text | escape }}'
  style='color: {{ text_color }};'
  {{ block.shopify_attributes }}
>
  {{- button_text -}}
</button>

{% stylesheet %}
  .gdr-modal__button--dismiss {
    background: transparent;
    border: none;
    text-decoration: underline;
    font-size: 18px;
    font-weight: 700;
    cursor: pointer;
    transition: opacity 0.3s ease;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
  }

  .gdr-modal__button--dismiss:hover {
    opacity: 0.8;
  }

  .gdr-modal__button--dismiss.gdr-modal__button--bold {
    font-weight: 700;
  }

  .gdr-modal__button--dismiss.gdr-modal__button--uppercase {
    text-transform: uppercase;
  }

  @media screen and (max-width: 600px) {
    .gdr-modal__button--dismiss {
      font-size: 14px;
    }
  }
{% endstylesheet %}

{% javascript %}
  document.querySelectorAll('[data-modal-button="dismiss"]').forEach((button) => {
    button.addEventListener('click', function () {
      const buttonText = this.getAttribute('data-button-text');

      // TODO: Integrate with analytics service
      // Examples:
      // - Google Analytics 4: gtag('event', 'modal_dismiss_button', { button_text: buttonText })
      // - Segment: analytics.track('modal_dismiss_button', { button_text: buttonText })
      // - Custom webhook: fetch('/api/analytics', { method: 'POST', body: JSON.stringify({event: 'modal_dismiss_button', ...}) })

      console.log('Analytics Event: modal_dismiss_button', {
        button_text: buttonText,
      });
    });
  });
{% endjavascript %}
